{% extends 'WastePlasticCollectorApp/base_template.html' %}
{% block page_title %}
    Report
{% endblock page_title %}

{% block header_title %}
  Report
{% endblock header_title %}
{% block custom_css %}
  <style>
    
    .content{
        margin-top: 10px;
    }
    .icon{
      margin-right:170px;
      background-color: red !important;
      display: inline-block;
    }
    .inner{
      margin-left:170px;
    }
    .icon-dashboard{
      margin-right:170px;
      color: #008080;
    }
    .card-info{
      background-color:#008080;
      color:white
    }
    .inner h4{
      color: #303778
    }
  </style>
{% endblock custom_css %}

{% block main_content %}

{% load static %}

<section class="content">
        <div class="container-fluid">
          <!-- /.row -->
          <div class="row">
            <div class="col-lg-6">
              <!-- PIE CHART -->
              <div class="card card-white">
                <div class="card-header">
                  <h3 class="card-title">Active Users</h3><br>
                  <p style="font-weight:bold;">{{assigned_task_count}}</p>
                </div>
                <div class="card-body">
                  <canvas id="activityChart" width="400" height="150"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
            </div>

            <div class="col-lg-6">
              <!-- DONUT CHART -->
              <div class="card card-white">
                <div class="card-header">
                  <h3 class="card-title">Active Users</h3><br>
                  <p style="font-weight:bold;">{{assigned_task_count}}</p>
                </div>
                <div class="card-body">
                  <canvas id="activityChart1" width="400" height="150"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <!-- PIE CHART -->
              <div class="card card-whit">
                <div class="card-header">
                  <h3 class="card-title">Enviromental Trends</h3>
                </div>
                <div class="card-body">
                  <canvas id="monthlyChart" width="400" height="100"></canvas>
                </div>
                <!-- /.card-body -->
                </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-6">
              <!-- PIE CHART -->
              <div class="card card-white">
                <div class="card-header">
                  <h3 class="card-title">Active Users</h3><br>
                  <p style="font-weight:bold;">{{assigned_task_count}}</p>
                </div>
                <div class="card-body">
                  <canvas id="activityChart" width="400" height="150"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
            </div>

            <div class="col-lg-6">
              <!-- DONUT CHART -->
              <div class="card card-white">
                <div class="card-header">
                  <h3 class="card-title">Active Users</h3><br>
                  <p style="font-weight:bold;">{{assigned_task_count}}</p>
                </div>
                <div class="card-body">
                  <canvas id="activityChart1" width="400" height="150"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
            </div>
          </div>

        </div><!-- /.container-fluid -->
      </section>
    {% block custom_js %}

<script>
        var ctx = document.getElementById('activityChart').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: {{ days|safe }},
                datasets: [{
                    label: 'Total Waste Plastic Size (kg)',
                    data: {{ counts|safe }},
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true
                    },
                    y: {
                        beginAtZero: true,
                        min: 0  // Ensure Y-axis starts at 0
                    }
                }
            }
        });
        var ctx1 = document.getElementById('activityChart1').getContext('2d');
        var chart1 = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: {{ days|safe }},
                datasets: [{
                    label: 'Total Waste Plastic Size (kg)',
                    data: {{ counts|safe }},
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true
                    },
                    y: {
                        beginAtZero: true,
                        min: 0  // Ensure Y-axis starts at 0
                    }
                }
            }
        });
        var ctxBar = document.getElementById('monthlyChart').getContext('2d');
        var chart = new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: {{ months|safe }},
                datasets: [{
                    label: 'Total Carbon Emissions (kg CO2)',
                    data: {{ month_counts|safe }},
                    borderColor: 'rgba(0, 128, 128, 1)',
                    backgroundColor: 'rgba(0, 128, 128, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0  // Ensure Y-axis starts at 0
                    }
                }
            }
        });
    </script>
    {% endblock custom_js %}
  {% endblock main_content %}
